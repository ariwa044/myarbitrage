{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load math_filters %}
{% block title %}{% trans 'Investment Plans' %}{% endblock %}

{% block extra_css %}
<style>
    .investment-wrapper {
        margin-top: 80px;
        padding: 4rem 0;
        background: linear-gradient(135deg, var(--bg-light) 0%, #f1f5f9 100%);
        min-height: calc(100vh - 80px);
    }

    .plans-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .plans-header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 0.5rem;
    }

    .plans-header p {
        font-size: 1.1rem;
        color: var(--text-gray);
    }

    .plans-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
        margin-bottom: 3rem;
    }

    .plan-card {
        background: var(--bg-white);
        border: 2px solid var(--border-color);
        border-radius: 1rem;
        padding: 2rem;
        transition: var(--transition);
        position: relative;
        display: flex;
        flex-direction: column;
        box-shadow: var(--shadow-md);
    }

    .plan-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--shadow-lg);
        border-color: var(--secondary-color);
    }

    .plan-card.popular {
        background: linear-gradient(135deg, var(--primary-color) 0%, #374151 100%);
        color: var(--bg-white);
        border-color: var(--secondary-color);
        transform: scale(1.05);
    }

    .plan-card.popular:hover {
        transform: scale(1.05) translateY(-8px);
        box-shadow: 0 20px 40px rgba(6, 182, 212, 0.3);
    }

    .popular-badge {
        position: absolute;
        top: -15px;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(135deg, var(--secondary-color) 0%, var(--accent-color) 100%);
        color: var(--bg-white);
        padding: 0.6rem 1.4rem;
        border-radius: 9999px;
        font-size: 0.8rem;
        font-weight: 700;
        letter-spacing: 0.05em;
        box-shadow: 0 4px 15px rgba(6, 182, 212, 0.3);
    }

    .plan-name {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }

    .plan-card.popular .plan-name {
        color: var(--bg-white);
    }

    .plan-description {
        font-size: 0.95rem;
        margin-bottom: 1.5rem;
        opacity: 0.8;
    }

    .plan-card.popular .plan-description {
        color: #cbd5e1;
    }

    .plan-return {
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--secondary-color);
        margin-bottom: 0.5rem;
    }

    .plan-card.popular .plan-return {
        color: #06b6d4;
    }

    .return-label {
        font-size: 0.9rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 1.5rem;
        color: var(--text-gray);
    }

    .plan-card.popular .return-label {
        color: #cbd5e1;
    }

    .plan-features {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-grow: 1;
    }

    .plan-feature {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 0.95rem;
        color: var(--text-gray);
    }

    .plan-card.popular .plan-feature {
        color: #e2e8f0;
    }

    .plan-feature i {
        color: #10b981;
        font-size: 1.1rem;
        flex-shrink: 0;
    }

    .plan-card.popular .plan-feature i {
        color: #10b981;
    }

    .plan-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        padding: 1rem 2rem;
        background: linear-gradient(135deg, var(--secondary-color) 0%, var(--accent-color) 100%);
        color: var(--bg-white);
        border: none;
        border-radius: 0.5rem;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: var(--transition);
        text-decoration: none;
        text-align: center;
        width: 100%;
    }

    .plan-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(6, 182, 212, 0.3);
    }

    .plan-button:active {
        transform: translateY(0);
    }

    .plan-card.popular .plan-button {
        background: var(--bg-white);
        color: var(--primary-color);
    }

    .plan-card.popular .plan-button:hover {
        background: #f1f5f9;
    }

    .info-section {
        background: var(--bg-white);
        border-radius: 1rem;
        padding: 2rem;
        box-shadow: var(--shadow-md);
        margin-top: 2rem;
    }

    .info-section h3 {
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        color: var(--text-dark);
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
    }

    .info-item {
        display: flex;
        gap: 1rem;
    }

    .info-icon {
        font-size: 1.5rem;
        color: var(--secondary-color);
        flex-shrink: 0;
        margin-top: 0.25rem;
    }

    .info-content h4 {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: var(--text-dark);
    }

    .info-content p {
        font-size: 0.9rem;
        color: var(--text-gray);
        line-height: 1.6;
    }

    @media (max-width: 768px) {
        .investment-wrapper {
            padding: 2rem 0;
        }

        .plans-header h1 {
            font-size: 1.75rem;
        }

        .plans-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .plan-card.popular {
            transform: scale(1);
        }

        .plan-card.popular:hover {
            transform: translateY(-8px);
        }

        .plan-return {
            font-size: 2rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="investment-wrapper">
    <div class="container">
        <!-- Page Header -->
        <div class="plans-header">
            <h1>{% trans 'Investment Plans' %}</h1>
            <p>{% trans 'Choose the best investment strategy for your goals' %}</p>
        </div>

        <!-- Plans Grid -->
        <div class="plans-grid">
            {% for plan in plans %}
            <div class="plan-card {% if forloop.counter == 2 %}popular{% endif %}">
                {% if forloop.counter == 2 %}
                <div class="popular-badge">{% trans 'Most Popular' %}</div>
                {% endif %}
                
                <h3 class="plan-name">{{ plan.name }}</h3>
                <p class="plan-description">
                    {% blocktrans with min=plan.min_amount|floatformat:0 %}Perfect for ${{ min }}+ investments{% endblocktrans %}
                </p>
                
                <div class="plan-return">{{ plan.percent_return }}%</div>
                <p class="return-label">{% trans 'Daily Return' %}</p>
                
                <div class="plan-features">
                    <div class="plan-feature">
                        <i class="fas fa-check-circle"></i>
                        {% blocktrans with min=plan.min_amount|floatformat:2 %}Min investment: ${{ min }}{% endblocktrans %}
                    </div>
                    <div class="plan-feature">
                        <i class="fas fa-check-circle"></i>
                        {% blocktrans with max=plan.max_amount|floatformat:2 %}Max investment: ${{ max }}{% endblocktrans %}
                    </div>
                    <div class="plan-feature">
                        <i class="fas fa-check-circle"></i>
                        {% blocktrans with days=plan.duration_days %}Duration: {{ days }} days{% endblocktrans %}
                    </div>
                    
                </div>

                <a href="{% url 'core:create_investment' plan.id %}" class="plan-button">
                    <i class="fas fa-rocket"></i> {% trans 'Invest Now' %}
                </a>
            </div>
            {% endfor %}
        </div>

        <!-- How It Works Section -->
        <div class="info-section">
            <h3><i class="fas fa-lightbulb"></i> {% trans 'How Our Plans Work' %}</h3>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div class="info-content">
                        <h4>{% trans 'Daily Returns' %}</h4>
                        <p>{% trans 'Each plan earns fixed daily returns based on your investment amount. Profits are credited to your account every 24 hours.' %}</p>
                    </div>
                </div>

                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="info-content">
                        <h4>{% trans 'Capital Protection' %}</h4>
                        <p>{% trans 'Your initial investment is protected by our risk management system and returned at the end of the term.' %}</p>
                    </div>
                </div>

                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="info-content">
                        <h4>{% trans 'Flexible Terms' %}</h4>
                        <p>{% trans 'Choose the plan duration that works best for you. No lock-in periods, withdraw anytime.' %}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
